CoreASM Test

use StandardPlugins
use OperatorPlugin

init initRule

operator postfix 75 '!! M! E!' = dec
operator infixl 50 '? E?'  = dec
operator prefix 25 '## E#' = inc
operator closed '~ M~ E~'  = inc

derived dec(x, y, z) = x - y - z
derived inc(x, y) = x + y

/*
 * @minsteps 1
 * @maxsteps 1
 *
 * @require "01: true"
 * @require "02: true"
 * @require "03: true"
 * @require "04: true"
 * @require "05: true"
 */
rule initRule =
  seq
    print ("01: " + ((1?1E?2!!2M!0E!) = (1?1E?(2!!2M!0E!))))
  next
    print ("02: " + ((##4E#1?1E?2!!2M!0E!) = (##4E#(1?1E?(2!!2M!0E!)))))
  next
    print ("03: " + ((##4E#1?1E?1) = (##4E#(1?1E?1))))
  next
    print ("04: " + ((~1M~##4E#1?1E?1E~) = (~1M~(##4E#(1?1E?1))E~)))
  next
    print ("05: " + ((~1?3!!1M!2E!E?3M~##4E#1?1E?1E~) = (~(1?(3!!1M!2E!)E?3)M~(##4E#(1?1E?1))E~)))
