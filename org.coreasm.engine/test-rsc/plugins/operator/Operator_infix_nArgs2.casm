CoreASM Test

use StandardPlugins
use OperatorPlugin

init initRule

operator infixl 50 '!!' = dec
operator infixl 50 '?' = dec
operator infixl 50 '##' = inc
operator infixl 50 '~' = inc

derived dec(x, y, z) = x - y + z
derived inc(x, y, z) = x + y - z

/*
 * @minsteps 1
 * @maxsteps 1
 *
 * @refuse "01: 0"
 * @refuse "02: 0"
 * @refuse "03: 0"
 * @refuse "04: 0"
 * @refuse "05: 0"
 * @refuse "06: 0"
 * @refuse "07: 0"
 * @refuse "08: 0"
 * @refuse "09: 0"
 * @refuse "10: 0"
 * @refuse "11: 0"
 * @refuse "12: 0"
 * @refuse "13: 0"
 * @refuse "14: 0"
 * @refuse "15: 0"
 * @refuse "16: 0"
 * @refuse "17: 0"
 * @refuse "18: 0"
 * @refuse "19: 0"
 * @refuse "20: 0"
 * @refuse "21: 0"
 * @refuse "22: 0"
 * @refuse "23: 0"
 * @refuse "24: 0"
 * @refuse "25: 0"
 */
rule initRule =
  seq
    print ("01: " + (1?1))
  next
    print ("02: " + (2?3?-1))
  next
    print ("03: " + (3?3))
  next
    print ("04: " + (2?3?-1))
  next
    print ("05: " + (4?2?3?-1))
  next
    print ("06: " + (1!!1))
  next
    print ("07: " + (2!!3!!-1))
  next
    print ("08: " + (3!!3))
  next
    print ("09: " + (2!!3!!-1))
  next
    print ("10: " + (4!!2!!3!!-1))
  next
    print ("11: " + (1##-1))
  next
    print ("12: " + (-2##3##-1))
  next
    print ("13: " + (3##-3))
  next
    print ("14: " + (2##3##-5))
  next
    print ("15: " + (-4##2##3##-1))
  next
    print ("16: " + (1~-1))
  next
    print ("17: " + (-2~3~-1))
  next
    print ("18: " + (3~-3))
  next
    print ("19: " + (2~3~-5))
  next
    print ("20: " + (-4~2~3~-1))
  next
    print ("21: " + (5!!6~1))
  next
    print ("22: " + (5!!6~1##2?1~-1))
  next
    print ("23: " + (5?6##1))
  next
    print ("24: " + (5!!6~1##2?1~-1))
  next
    print ("25: " + (5!!1~1##2?1~-6))
