CoreASM Test

use StandardPlugins
use OperatorPlugin

init initRule

operator ternary 50 !! E! on NUMBER * NUMBER * NUMBER = dec
operator ternary 50 ? E?  on NUMBER * NUMBER * NUMBER = dec
operator ternary 50 !! E! on NUMBER * NUMBER * STRING = inc
operator ternary 50 ? E?  on NUMBER * NUMBER * STRING = inc
operator ternary 50 ## E# on NUMBER * NUMBER * NUMBER = dec
operator ternary 50 ~ E~  on NUMBER * NUMBER * NUMBER = dec
operator ternary 50 ## E# on NUMBER * NUMBER * STRING = inc
operator ternary 50 ~ E~  on NUMBER * NUMBER * STRING = inc

derived dec(x, y, z) = 0
derived inc(x, y, z) = "fail"

/*
 * @minsteps 1
 * @maxsteps 1
 *
 * @require "01: 0"
 * @require "02: 0"
 * @require "03: 0"
 * @require "04: 0"
 * @require "05: 0"
 * @require "06: 0"
 * @require "07: 0"
 * @require "08: 0"
 * @require "09: 0"
 * @require "10: 0"
 * @require "11: 0"
 * @require "12: 0"
 * @require "13: 0"
 * @require "14: 0"
 * @require "15: 0"
 * @require "16: fail"
 * @require "17: fail"
 * @require "18: fail"
 * @require "19: fail"
 * @require "20: fail"
 * @require "21: fail"
 * @require "22: fail"
 * @require "23: fail"
 * @require "24: fail"
 * @require "25: fail"
 *
 * @refuse "01: fail"
 * @refuse "02: fail"
 * @refuse "03: fail"
 * @refuse "04: fail"
 * @refuse "05: fail"
 * @refuse "06: fail"
 * @refuse "07: fail"
 * @refuse "08: fail"
 * @refuse "09: fail"
 * @refuse "10: fail"
 * @refuse "11: fail"
 * @refuse "12: fail"
 * @refuse "13: fail"
 * @refuse "14: fail"
 * @refuse "15: fail"
 * @refuse "16: 0"
 * @refuse "17: 0"
 * @refuse "18: 0"
 * @refuse "19: 0"
 * @refuse "20: 0"
 * @refuse "21: 0"
 * @refuse "22: 0"
 * @refuse "23: 0"
 * @refuse "24: 0"
 * @refuse "25: 0"
 */
rule initRule =
  seq
    print ("01: " + (1?1E?0))
  next
    print ("02: " + (2?3?1E?1E?1))
  next
    print ("03: " + (3?5E?2))
  next
    print ("04: " + (2?3?5E?2E?-2))
  next
    print ("05: " + (5?2E?1?4E?0))
  next
    print ("06: " + (1!!1E!0))
  next
    print ("07: " + (2!!3!!1E!1E!1))
  next
    print ("08: " + (3!!5E!2))
  next
    print ("09: " + (2!!3!!5E!2E!-2))
  next
    print ("10: " + (5!!2E!1!!4E!0))
  next
    print ("11: " + (1##1E#2))
  next
    print ("12: " + (2##3##1E#1E#5))
  next
    print ("13: " + (3##5E#8))
  next
    print ("14: " + (2##3##5E#2E#8))
  next
    print ("15: " + (-3##2E#1##4E#6))
  next
    print ("16: " + (1~1E~"2"))
  next
    print ("17: " + (2~3~1E~1E~"5"))
  next
    print ("18: " + (3~5E~"8"))
  next
    print ("19: " + (2~3~5E~2E~"8"))
  next
    print ("20: " + ((5~2E~1)~4E~"10"))
  next
    print ("21: " + (5!!6E!0~1E~"0"))
  next
    print ("22: " + (5!!6E!1~1##2?1~1E~1E?1E#1E~"2"))
  next
    print ("23: " + (5?6E?1##1E#"1"))
  next
    print ("24: " + (5!!6E!1~1##2?1~1E~1E?1E#1E~"2"))
  next
    print ("25: " + (5!!1E!1~1##2?1~1E~1E?1E#1E~"7"))
