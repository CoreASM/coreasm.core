CoreASM Test

use StandardPlugins
use OperatorPlugin

init initRule

operator closed '!! E!' on NUMBER = dec
operator closed '?? E?' on NUMBER  = dec
operator closed '!! E!' on STRING = inc
operator closed '?? E?' on STRING = inc

derived dec(x) = 0
derived inc(x) = "fail"

/*
 * @minsteps 1
 * @maxsteps 1
 *
 * @require "01: 0"
 * @require "02: 0"
 * @require "03: fail"
 * @require "04: fail"
 */
rule initRule =
  seq
    print ("01: " + (??1E?))
  next
    print ("02: " + (!!1E!))
  next
    print ("03: " + (??"1"E?))
  next
    print ("04: " + (!!"1"E!))
